#!/bin/bash
[ $(id -u) -eq 0 ] && {
    echo "請不要使用 root 執行."
    exit 1
}

cd /tools/work
rm -rf tcl8.6.6
tar -xf ../src/tcl-core8.6.6-src.tar.gz
cd tcl8.6.6/unix

function build() {
./configure \
    --prefix=/tools \
    > /dev/null \
    && make > /dev/null \
    && TZ=UTC make test \
    && make install > /dev/null \
    && chmod -v u+w /tools/lib/libtcl8.6.so \
    && make install-private-headers > /dev/null \
    && ln -sv tclsh8.6 /tools/bin/tclsh
}

time build
