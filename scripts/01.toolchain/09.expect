#!/bin/bash
[ $(id -u) -eq 0 ] && {
    echo "請不要使用 root 執行."
    exit 1
}

cd /tools/work
rm -rf expect5.45
tar -xf ../src/expect5.45.tar.gz
cd expect5.45

cp -v configure{,.orig}
sed 's:/usr/local/bin:/bin:' configure.orig > configure

function build() {
./configure \
    --prefix=/tools       \
    --with-tcl=/tools/lib \
    --with-tclinclude=/tools/include \
    > /dev/null \
    && make > /dev/null \
    && make test \
    && make SCRIPTS="" install > /dev/null
}

time build
